mixed-port: 7890
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: true
external-controller: 0.0.0.0:9999
external-ui: ui
external-ui-name: xd 
external-ui-url: "https://git.nxnow.top/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip" #ä» GitHub Pages åˆ†æ”¯è·å–
#experimental:
#  sniff-tls-sni: true
unified-delay: true
secret: "dashborad_password"
#authentication:
#- "meta_socks_user:meta_password"
hosts:
  # hkdns: 202.14.67.4,202.14.67.14
  ".googleapis.cn": 142.250.196.131
  ".google.cn": 142.250.196.131

geodata-mode: true
geox-url:
  geoip: "https://git.nxnow.top/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://git.nxnow.top/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://git.nxnow.top/MetaCubeX/meta-rules-dat/releases/download/latest/Country.mmdb"

# ä¸å¼€å¯tunæ²¡å¿…è¦å¯ç”¨
#dns:
  #enable: true
  #ipv6: true
  #prefer-h3: true
  #enhanced-mode: fake-ip
  #nameserver:
    #- https://doh.pub/dns-query
    #- https://dns.alidns.com/dns-query
    #- https://doh.dns.sb/dns-query
    #è‡ªè¡Œä¿®æ”¹dns
  #fake-ip-filter:
    #- +.*
  #nameserver-policy:
    #"geosite:cn,private,games-cn":
      #- 119.29.29.29
      #- https://dns.alidns.com/dns-query
      #å¦‚è®¾å¤‡ç½‘ç»œç¯å¢ƒå›ºå®š,å¯ä¿®æ”¹ä¸ºè·¯ç”±å™¨/ç½‘å…³/è¿è¥å•†dnsï¼ŒåŠ å¿«é€Ÿåº¦
#tun:
  #enable: false
  #stack: system #gvisor system
  #dns-hijack:
    #- any:53
  #auto-route: true
  #auto-detect-interface: true
  #auto-redir: true #Linuxä¸“å±è‡ªåŠ¨è·¯ç”±

providerTest:
  &providerTest {
    type: http,
    interval: 43200,
    health-check:
      {
        enable: true,
        url: http://cp.cloudflare.com/generate_204,
        interval: 14400,
      },
  }

allProviderSelect: &allProviderSelect
  type: select
  use:
    - Provider1
    - Provider2
    - Provider3
  # è‡ªè¡Œæ·»åŠ å…¶ä»–æœºåœº

allProviderAuto: &allProviderAuto
  type: url-test
  url: "http://cp.cloudflare.com/generate_204"
  interval: 300
  use:
    - Provider1
    - Provider2
    - Provider3
  # è‡ªè¡Œæ·»åŠ å…¶ä»–æœºåœº

allProviderLoadBalance: &allProviderLoadBalance
  type: load-balance
  url: "http://cp.cloudflare.com/generate_204"
  interval: 300
  use:
    - Provider1
    - Provider2
    - Provider3
  # è‡ªè¡Œæ·»åŠ å…¶ä»–æœºåœº

proxies:

proxy-providers:
  Provider1:
    <<: *providerTest
    url: "list1" #è‡ªè¡Œä¿®æ”¹è®¢é˜…é“¾æ¥
    path: ./Proxy/Provider1.yaml
  Provider2:
    <<: *providerTest
    url: "list2" #è‡ªè¡Œä¿®æ”¹è®¢é˜…é“¾æ¥
    path: ./Proxy/Provider2.yaml
  Provider3:
    <<: *providerTest
    url: "list3" #è‡ªè¡Œä¿®æ”¹è®¢é˜…é“¾æ¥
    path: ./Proxy/Provider3.yaml
  # è‡ªè¡Œæ·»åŠ å…¶ä»–æœºåœº

proxy-groups:
  - name: "ğŸš€ å…¨çƒäº’è”"
    <<: *allProviderSelect
    filter: "(æ¸¯*IPLC|IEPL|ä¸“çº¿)|é¦™æ¸¯"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
  - name: "ğŸ® æ¸¸æˆå¨±ä¹"
    <<: *allProviderSelect
    filter: "(IPLC|IEPL|ä¸“çº¿|Game|ä¼Ÿã®)"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - DIRECT
  - name: "â¬ æµ‹é€Ÿä¸‹è½½"
    type: select
    #use:
    #  - Provier
    proxies:
      - DIRECT
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸš€ å…¨çƒäº’è”
  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies:
      - DIRECT
      - ğŸš€ å…¨çƒäº’è”
  - name: "ğŸ“² Telegram"
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡Balance
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡ºğŸ‡¸ ç¾å›½Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
    url: "http://telesco.pe"
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯"
    <<: *allProviderSelect
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(é¦™æ¸¯))"
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬"
    <<: *allProviderSelect
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(æ—¥æœ¬))"
  - name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡"
    <<: *allProviderSelect
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(æ–°åŠ å¡))"
  - name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡Balance"
    <<: *allProviderLoadBalance
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(æ–°åŠ å¡))"
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½"
    <<: *allProviderSelect
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(ç¾å›½))"
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½Auto"
    <<: *allProviderAuto
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(ç¾å›½))"
  - name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾Auto"
    <<: *allProviderAuto
    filter: "(^(?!.*(æ¸¸æˆ|Game).*).*(å°æ¹¾))"
  - name: "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª"
    type: select
    proxies:
      - REJECT
      - DIRECT

rule-providers:
  # ğŸ“² TelegramIP:
  #   type: http
  #   behavior: ipcidr
  #   path: ./RuleSet/TelegramIP.yaml
  #   url: https://z.nxnow.top/iprule?url=aHR0cHM6Ly9ydWxlc2V0LnNray5tb2UvQ2xhc2gvaXAvdGVsZWdyYW0udHh0
  #   interval: 43200
  ğŸŒ å›½å¤–åª’ä½“:
    type: http
    behavior: classical
    path: ./RuleSet/Streaming.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9ydWxlc2V0LnNray5tb2UvQ2xhc2gvbm9uX2lwL3N0cmVhbS50eHQ
    interval: 43200
  ğŸŒ å›½å¤–åª’ä½“IP:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingIP.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9ydWxlc2V0LnNray5tb2UvQ2xhc2gvaXAvc3RyZWFtLnR4dA
    interval: 43200
  ğŸŒ å›½å†…åª’ä½“:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingCN.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RpdmluZUVuZ2luZS9Qcm9maWxlcy9tYXN0ZXIvU3VyZ2UvUnVsZXNldC9TdHJlYW1pbmdNZWRpYS9TdHJlYW1pbmdDTi5saXN0
    interval: 43200
  ğŸ›‘ å¹¿å‘Šæ‹¦æˆª:
    type: http
    behavior: classical
    path: ./RuleSet/Advertising.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvQmFuQUQubGlzdA
    interval: 43200
  ğŸ›‘ DNSæ‹¦æˆª:
    type: http
    behavior: classical
    path: ./RuleSet/DNSBlock.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1ZpcmdpbENseW5lL0dldFNvbWVGcmllcy9tYWluL3J1bGVzZXQvSFRUUEROUy5CbG9jay5saXN0
    interval: 43200
  ğŸš€ å…¨å±€è§„åˆ™:
    type: http
    behavior: classical
    path: ./RuleSet/Global.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUHJveHlMaXRlLmxpc3Q
    interval: 43200
  ğŸ¯ å›½å†…ç›´è¿:
    type: http
    behavior: domain
    path: ./RuleSet/China.yaml
    url: https://git.nxnow.top/MetaCubeX/meta-rules-dat/releases/download/latest/cn_domain.yaml
    interval: 43200
  ğŸ¯ IPæ®µç›´è¿:
    type: http
    behavior: ipcidr
    path: ./RuleSet/ChinaIP.yaml
    url: https://z.nxnow.top/iprule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvU3VyZ2UvQ2hpbmFJUHMvQ2hpbmFJUHNfUmVzb2x2ZS5saXN0
    interval: 43200
  ğŸ¯ å…¶ä»–ç›´è¿:
    type: http
    behavior: domain
    path: ./RuleSet/OtherDirect.yaml
    url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRGlyZWN0Lmxpc3Q
    interval: 43200
  ğŸ® æ¸¸æˆå¨±ä¹:
    type: http
    behavior: classical
    path: ./RuleSet/Game.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvR2FtZXMubGlzdA
    interval: 43200
  ğŸ® æ¸¸æˆç›´è¿:
    type: http
    behavior: domain
    path: ./RuleSet/GameDirect.yaml
    url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvR2FtZURpcmVjdC5saXN0
    interval: 43200
  â¬ æµ·å¤–ä¸‹è½½:
    type: http
    behavior: classical
    path: ./RuleSet/Download.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRG93bmxvYWQubGlzdA
    interval: 43200
  ğŸŒ å…¶ä»–åª’ä½“:
    type: http
    behavior: domain
    path: ./RuleSet/Video.yaml
    url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvVmlkZW8ubGlzdA
    interval: 43200
  âš¡ SpeedTest:
    type: http
    behavior: classical
    path: ./RuleSet/SpeedTest.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvU3BlZWR0ZXN0Lmxpc3Q
    interval: 43200
  ğŸŒ è½»é‡æµè§ˆ:
    type: http
    behavior: classical
    path: ./RuleSet/Daily.yaml
    url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRGFpbHkubGlzdA
    interval: 43200
  ğŸ‡ºğŸ‡¸ US_List:
    type: http
    behavior: domain
    path: ./RuleSet/US_Rule.yaml
    url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvdXMubGlzdA
    interval: 43200
  ğŸ‡¯ğŸ‡µ JP_List:
    type: http
    behavior: domain
    path: ./RuleSet/JP_Rule.yaml
    url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvanAubGlzdA
    interval: 43200

# è§„åˆ™
rules:
  - GEOIP,LAN,DIRECT
  - AND,((DST-PORT,22),(RULE-SET,ğŸ¯ IPæ®µç›´è¿)),DIRECT
  - DST-PORT,22,ğŸš€ å…¨çƒäº’è”
  - AND,((GEOSITE,youtube),(NETWORK,udp)),REJECT
  - AND,((RULE-SET,ğŸ‡ºğŸ‡¸ US_List),(NETWORK,udp)),REJECT
  - GEOSITE,category-games@cn,DIRECT
  - RULE-SET,ğŸ® æ¸¸æˆç›´è¿,DIRECT
  - GEOSITE,category-games,ğŸ® æ¸¸æˆå¨±ä¹
  - RULE-SET,ğŸ® æ¸¸æˆå¨±ä¹,ğŸ® æ¸¸æˆå¨±ä¹
  - RULE-SET,ğŸ‡ºğŸ‡¸ US_List,ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,ğŸ‡¯ğŸ‡µ JP_List,ğŸ‡¯ğŸ‡µ æ—¥æœ¬
  - RULE-SET,ğŸ¯ å…¶ä»–ç›´è¿,DIRECT
  - RULE-SET,ğŸ›‘ DNSæ‹¦æˆª,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,youtube,ğŸš€ å…¨çƒäº’è”
  - RULE-SET,ğŸŒ å…¶ä»–åª’ä½“,ğŸš€ å…¨çƒäº’è”
  - GEOSITE,telegram,ğŸ“² Telegram
  - GEOIP,telegram,ğŸ“² Telegram
  #- RULE-SET,ğŸ“² TelegramIP,ğŸ“² Telegram
  - RULE-SET,â¬ æµ·å¤–ä¸‹è½½,â¬ æµ‹é€Ÿä¸‹è½½
  - RULE-SET,âš¡ SpeedTest,â¬ æµ‹é€Ÿä¸‹è½½
  - RULE-SET,ğŸŒ è½»é‡æµè§ˆ,ğŸš€ å…¨çƒäº’è”
  - RULE-SET,ğŸŒ å›½å†…åª’ä½“,DIRECT
  - RULE-SET,ğŸŒ å›½å¤–åª’ä½“,ğŸš€ å…¨çƒäº’è”
  - RULE-SET,ğŸŒ å›½å¤–åª’ä½“IP,ğŸš€ å…¨çƒäº’è”
  - RULE-SET,ğŸš€ å…¨å±€è§„åˆ™,ğŸš€ å…¨çƒäº’è”
  - GEOSITE,apple@cn,DIRECT
  - GEOSITE,apple,â¬ æµ‹é€Ÿä¸‹è½½
  - GEOSITE,microsoft@cn,DIRECT
  - GEOSITE,microsoft,â¬ æµ‹é€Ÿä¸‹è½½
  - GEOSITE,cn,DIRECT
  - RULE-SET,ğŸ¯ å›½å†…ç›´è¿,DIRECT
  - RULE-SET,ğŸ¯ IPæ®µç›´è¿,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
