mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
# ipv6: false
external-controller: 127.0.0.1:9090
# profile:
#   tracing: true
#secret: password
# authentication:
#  - "user1:pass1"
hosts:
  # hkdns: 202.14.67.4,202.14.67.14
  'services.googleapis.cn': services.googleapis.com
  # 142.250.196.131
  '.googleapis.cn': googleapis.com
  '.google.cn': google.com
  
# ä¸å¼€å¯tunæ²¡å¿…è¦å¯ç”¨
#dns:
  #enable: true
  #enhanced-mode: fake-ip
  #nameserver:
    #- https://doh.pub/dns-query
    #- https://dns.alidns.com/dns-query
    #- https://doh.dns.sb/dns-query
  #fake-ip-filter:
    #- +.*
#tun:
  #enable: false
  #stack: system #gvisor system
  #dns-hijack:
    #- any:53
  #auto-route: true
  #auto-detect-interface: true
  ##auto-redir: true #Linuxä¸“å±è‡ªåŠ¨è·¯ç”±
    
proxies:
#å•ç‹¬èŠ‚ç‚¹
  - {name: TrojanèŠ‚ç‚¹, server: localhost, port: 80, type: trojan, password: trojanpassword, sni: windows.sni.com, skip-cert-verify: true, udp: true}
  - {name: ShadowsocksèŠ‚ç‚¹, server: localhost, port: 81, type: ss, cipher: aes-128-gcm, password: sspassword, udp: true}
  - {name: VmessèŠ‚ç‚¹, server: localhost, port: 82, type: vmess, uuid: vmessuuid, alterId: 0, cipher: auto, tls: false, network: ws, ws-opts: {path: /path, headers: {Host: windows.host.com}}}
  - {name: Socks5èŠ‚ç‚¹, server: localhost, port: 83, type: socks5, username: username, password: password}
  - {name: HttpèŠ‚ç‚¹, server: localhost, port: 84, type: http, username: username, password: password, tls: false}

#æ¨¡å—è®¢é˜…, ABCloud_Gameè¿™ç±»å¯è‡ªè¡Œé‡å‘½å,pathåçš„æ–‡ä»¶åä¹Ÿéœ€è¦é‡å‘½åä¸é‡å¤,urlå¯è‡ªè¡Œä¿®æ”¹è®¢é˜…é“¾æ¥,æˆ–è€…ç”¨æˆ‘åç«¯ç²¾ç®€
proxy-providers:
  ABCloud_Game:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=æ¸¸æˆ"
    interval: 43200
    path: ./Proxy/ABCloud_Game.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204
  TomLink_HK:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=æ¸¯|HKT|AGA"
    interval: 43200
    path: ./Proxy/TomLink_HK.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204 
  TomLink_US:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=ç¾"
    interval: 43200
    path: ./Proxy/TomLink_US.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204 
  TomLink_SGP:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=å¡"
    interval: 43200
    path: ./Proxy/TomLink_SGP.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204
  TomLink_JP:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=æ—¥"
    interval: 43200
    path: ./Proxy/TomLink_JP.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204
  TomLink_TW:
    type: http
    url: "https://z.nxnow.top/csub?url=è®¢é˜…é“¾æ¥&include=å°"
    interval: 43200
    path: ./Proxy/TomLink_TW.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://cp.cloudflare.com/generate_204
  NetEaseUnlock:
    type: http
    url: "https://z.nxnow.top/csub?url=https://raw.githubusercontent.com/NZESupB/Profile/main/NetEaseSub"
    interval: 43200
    path: ./Proxy/NetEaseUnlock.yaml
    health-check:
      enable: true
      interval: 3600
      url: http://interface3.music.163.com


proxy-groups:
    - name: "ğŸš€ å…¨çƒäº’è”"
      type: select
      use:
      proxies:
          - ğŸ‡­ğŸ‡° é¦™æ¸¯
          - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
          - ğŸ‡ºğŸ‡¸ ç¾å›½
          - ğŸ‡¹ğŸ‡¼ å°æ¹¾
    - name: "ğŸ® æ¸¸æˆå¨±ä¹"
      type: select
      use:
          - ABCloud_Game
          - TomLink_HK
      proxies:
          - ğŸ‡­ğŸ‡° é¦™æ¸¯
          - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
          - ğŸ‡ºğŸ‡¸ ç¾å›½
          - ğŸ‡¹ğŸ‡¼ å°æ¹¾
          - DIRECT
    - name: "ğŸŒ å›½å¤–åª’ä½“"
      type: select
      use:
      proxies:
          - ğŸ‡­ğŸ‡° é¦™æ¸¯
          - ğŸ‡¹ğŸ‡¼ å°æ¹¾
          - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
          - ğŸ‡ºğŸ‡¸ ç¾å›½
          - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    - name: "â¬ æµ‹é€Ÿä¸‹è½½"
      type: select
      use:
      proxies:
          - DIRECT
          - ğŸ‡­ğŸ‡° é¦™æ¸¯
          - ğŸ‡¹ğŸ‡¼ å°æ¹¾
          - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
          - ğŸ‡ºğŸ‡¸ ç¾å›½
          - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
          - ğŸš€ å…¨çƒäº’è”
    - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯"
      type: select
      use:
          - Kitony_HK
      proxies:
    - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬"
      type: select
      proxies:
      use:
          - TomLink_JP
    - name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡"
      type: select
      use:
          - TomLink_SGP
    - name: "ğŸ‡ºğŸ‡¸ ç¾å›½"
      type: select
      use:
          - TomLink_US
    - name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾"
      type: select
      use:
          - TomLink_TW
    - name: "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª"
      type: select
      proxies:
          - REJECT
          - DIRECT
    - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
      type: select
      proxies:
          - DIRECT
          - ğŸš€ å…¨çƒäº’è”
    - name: "ğŸ“² Telegram"
      type: select
      use:
      proxies:
          - ğŸ“² TelegramFallBack
          - ğŸš€ å…¨çƒäº’è”
          - ğŸŒ å›½å¤–åª’ä½“
    - name: "ğŸ“² TelegramFallBack"
      type: fallback
      proxies:
      use:
          - TomLink_HK
          - TomLink_SGP
      url: "http://telesco.pe"
      interval: 600
      tolerance: 2000

rule-providers:
    ğŸ’» æœ¬åœ°ä¿ç•™:
        type: http
        behavior: classical
        path: ./RuleSet/Local_Area_Network.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3RpbmR5MjAxMy9zdWJjb252ZXJ0ZXIvbWFzdGVyL2Jhc2UvcnVsZXMvTG9jYWxBcmVhTmV0d29yay5saXN0
        interval: 43200
    ğŸ“² Telegram:
        type: http
        behavior: classical
        path: ./RuleSet/Telegram.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvU3VyZ2UvVGVsZWdyYW0vVGVsZWdyYW0ubGlzdA
        interval: 43200
    ğŸŒ å›½å¤–åª’ä½“:
        type: http
        behavior: classical
        path: ./RuleSet/Streaming.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RpdmluZUVuZ2luZS9Qcm9maWxlcy9tYXN0ZXIvU3VyZ2UvUnVsZXNldC9TdHJlYW1pbmdNZWRpYS9TdHJlYW1pbmcubGlzdA
        interval: 43200
    ğŸŒ å›½å†…åª’ä½“:
        type: http
        behavior: classical
        path: ./RuleSet/StreamingCN.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RpdmluZUVuZ2luZS9Qcm9maWxlcy9tYXN0ZXIvU3VyZ2UvUnVsZXNldC9TdHJlYW1pbmdNZWRpYS9TdHJlYW1pbmdDTi5saXN0
        interval: 43200
    ğŸ›‘ å¹¿å‘Šæ‹¦æˆª:
        type: http
        behavior: classical
        path: ./RuleSet/Advertising.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvQmFuQUQubGlzdA
        interval: 43200
    ğŸ›‘ Anti_AD:
        type: http
        behavior: domain
        path: ./RuleSet/Anti_AD.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9hbnRpLWFkLm5ldC9zdXJnZS50eHQ
        interval: 43200
    ğŸš€ å…¨å±€è§„åˆ™:
        type: http
        behavior: classical
        path: ./RuleSet/Global.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUHJveHlMaXRlLmxpc3Q
        interval: 43200
    â“‚ï¸ å¾®è½¯æœåŠ¡:
        type: http
        behavior: domain
        path: ./RuleSet/Microsoft.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvU3VyZ2UvTWljcm9zb2Z0L01pY3Jvc29mdC5saXN0
        interval: 43200
    ğŸ¯ å›½å†…ç›´è¿:
        type: http
        behavior: classical
        path: ./RuleSet/China.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvQ2hpbmFEb21haW4ubGlzdA
        interval: 43200
    ğŸ¯ IPæ®µç›´è¿:
        type: http
        behavior: ipcidr
        path: ./RuleSet/ChinaIP.yaml
        url: https://z.nxnow.top/iprule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvU3VyZ2UvQ2hpbmFJUHMvQ2hpbmFJUHNfUmVzb2x2ZS5saXN0
        interval: 43200
    ğŸ¯ å…¶ä»–ç›´è¿:
        type: http
        behavior: domain
        path: ./RuleSet/OtherDirect.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRGlyZWN0Lmxpc3Q
        interval: 43200
    ğŸ‡¬ GoogleFCM:
        type: http
        behavior: classical
        path: ./RuleSet/GoogleFCM.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUnVsZXNldC9Hb29nbGVGQ00ubGlzdA
        interval: 43200
    ğŸ® æ¸¸æˆå¨±ä¹:
        type: http
        behavior: classical
        path: ./RuleSet/Game.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvR2FtZXMubGlzdA
        interval: 43200
    ğŸ® æ¸¸æˆç›´è¿:
        type: http
        behavior: domain
        path: ./RuleSet/GameDirect.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvR2FtZURpcmVjdC5saXN0
        interval: 43200
    â¬ æµ·å¤–ä¸‹è½½:
        type: http
        behavior: classical
        path: ./RuleSet/Download.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRG93bmxvYWQubGlzdA
        interval: 43200
    ğŸŒ å…¶ä»–åª’ä½“:
        type: http
        behavior: domain
        path: ./RuleSet/Video.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvVmlkZW8ubGlzdA
        interval: 43200
    âš¡ SpeedTest:
        type: http
        behavior: classical
        path: ./RuleSet/SpeedTest.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvU3BlZWR0ZXN0Lmxpc3Q
        interval: 43200
    ğŸŒ è½»é‡æµè§ˆ:
        type: http
        behavior: classical
        path: ./RuleSet/Daily.yaml
        url: https://z.nxnow.top/crule?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvRGFpbHkubGlzdA
        interval: 43200
    ğŸ‡ºğŸ‡¸ US_List:
        type: http
        behavior: domain
        path: ./RuleSet/US_Rule.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvdXMubGlzdA
        interval: 43200
    ğŸ‡¯ğŸ‡µ JP_List:
        type: http
        behavior: domain
        path: ./RuleSet/JP_Rule.yaml
        url: https://z.nxnow.top/cruled?url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL05aRVN1cEIvUHJvZmlsZS9tYWluL1J1bGUvanAubGlzdA
        interval: 43200

# è„šæœ¬
script:
  shortcuts:
    bilibilishit: any([word in host for word in ['biliapi', 'bilibili']]) and any([word in host for word in ['-live-tracker-', 'p2p', 'pcdn']])
    douyushit: (network == 'udp' or 'p2p' in host) and 'douyu' in host
    udpshit: network == "udp" and match_provider("ğŸŒ å›½å¤–åª’ä½“")
    #quic: network == 'udp' and dst_port == 443 #ç¦ç”¨443udp,å¾®ä¿¡å¯èƒ½ä¼šä½¿ç”¨443udpå¯¼è‡´è¯¯æ€
    #22.11.25åå†…æ ¸
    #ping: resolve_process_name() == 'ping'
    curl: resolve_process_path() == '/usr/bin/curl'
# è§„åˆ™
rules:
    - DOMAIN-SUFFIX,local,DIRECT,no-resolve
    - RULE-SET,ğŸ’» æœ¬åœ°ä¿ç•™,DIRECT
    - SCRIPT,bilibilishit,REJECT
    - SCRIPT,douyushit,REJECT
    - SCRIPT,udpshit,REJECT,no-resolve
    #- SCRIPT,ping,DIRECT
    - RULE-SET,ğŸ¯ å…¶ä»–ç›´è¿,DIRECT
    - RULE-SET,ğŸ® æ¸¸æˆç›´è¿,DIRECT
    - RULE-SET,ğŸ® æ¸¸æˆå¨±ä¹,ğŸ® æ¸¸æˆå¨±ä¹
    - RULE-SET,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    # AntiADè‡ªè¡Œè€ƒè™‘æ˜¯å¦æ·»åŠ ,æœ‰å¯èƒ½ä¼šè¯¯æ€
    - RULE-SET,ğŸ›‘ Anti_AD,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    - RULE-SET,ğŸŒ å…¶ä»–åª’ä½“,ğŸŒ å›½å¤–åª’ä½“
    - RULE-SET,ğŸ‡ºğŸ‡¸ US_List,ğŸ‡ºğŸ‡¸ ç¾å›½
    - RULE-SET,ğŸ‡¯ğŸ‡µ JP_List,ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    - RULE-SET,ğŸ“² Telegram,ğŸ“² Telegram
    - RULE-SET,ğŸ‡¬ GoogleFCM,ğŸš€ å…¨çƒäº’è”
    - RULE-SET,â¬ æµ·å¤–ä¸‹è½½,â¬ æµ‹é€Ÿä¸‹è½½
    - RULE-SET,âš¡ SpeedTest,â¬ æµ‹é€Ÿä¸‹è½½
    - RULE-SET,ğŸŒ è½»é‡æµè§ˆ,ğŸš€ å…¨çƒäº’è”
    - RULE-SET,ğŸŒ å›½å†…åª’ä½“,DIRECT
    - RULE-SET,ğŸŒ å›½å¤–åª’ä½“,ğŸŒ å›½å¤–åª’ä½“
    - RULE-SET,ğŸš€ å…¨å±€è§„åˆ™,ğŸš€ å…¨çƒäº’è”
    - RULE-SET,ğŸ¯ å›½å†…ç›´è¿,DIRECT
    - RULE-SET,ğŸ¯ IPæ®µç›´è¿,DIRECT
    - RULE-SET,â“‚ï¸ å¾®è½¯æœåŠ¡,â¬ æµ‹é€Ÿä¸‹è½½
    - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
